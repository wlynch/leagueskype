<!DOCTYPE HTML>
<html>
	<head>
        
		<script src="http://static.opentok.com/webrtc/v2.0/js/TB.min.js" type="text/javascript" charset="utf-8"></script>
		<link href="/css/demos.css" type="text/css" rel="stylesheet" >
        <script type="text/javascript" charset="utf-8">
			TB.addEventListener("exception", exceptionHandler);
			var session = TB.initSession("1_MX4xMTI3fn5UaHUgQXByIDA0IDEyOjE3OjE3IFBEVCAyMDEzfjAuMzg0MzkzNjN-"); // Replace with your own session ID. See https://dashboard.tokbox.com/projects
			session.addEventListener("sessionConnected", sessionConnectedHandler);
			session.addEventListener("streamCreated", streamCreatedHandler);
			session.connect(1127, "T1==cGFydG5lcl9pZD0xMTI3JnNpZz02YjBkMTc3MjE4YTU0ZDVkNzQ3ZGE3MjVkZGI2NjE5NGIxNWY3MGQ1OnNlc3Npb25faWQ9MV9NWDR4TVRJM2ZuNVVhSFVnUVhCeUlEQTBJREV5T2pFM09qRTNJRkJFVkNBeU1ERXpmakF1TXpnME16a3pOak4tJmNyZWF0ZV90aW1lPTEzNjUxMDMyNDImbm9uY2U9NTk4NTA4JnJvbGU9cHVibGlzaGVy"); // Replace with your API key and token. See https://dashboard.tokbox.com/projects

			function sessionConnectedHandler(event) {
				 subscribeToStreams(event.streams);
				 session.publish();
			}
			
			function streamCreatedHandler(event) {
				subscribeToStreams(event.streams);
			}
			
			function subscribeToStreams(streams) {
				for (i = 0; i < streams.length; i++) {
					var stream = streams[i];
					if (stream.connection.connectionId != session.connection.connectionId) {
						session.subscribe(stream);
					}
				}
			}
			
			function exceptionHandler(event) {
				alert(event.message);
			}
			

		</script>
    </head>
    <body>
    </body>
</html>

